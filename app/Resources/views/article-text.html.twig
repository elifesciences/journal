{% set hypothesis = true %}

{% extends '::article.html.twig' %}

{% block gtm %}

    {{ parent() }}

    {% if item.publishedDate %}
        window.gtmDataLayer.push(
        {
        {% if item.subjects|length -%}
            'articleSubjects': '{% for subject in item.subjects %}{{ subject.name }}{% if not loop.last %}, {% endif %}{% endfor %}',
        {%- endif %}

        'articleType': '{{ model_name(item.type) }}',
        'articlePublishDate': '{{ item.publishedDate|date('M j, Y') }}'
        }
        );
    {% endif %}

{% endblock %}

{% block article_body %}

    {% embed 'grid/content.html.twig' %}

        {% block navigation %}

            {% if viewSelector %}

                {{ render_pattern(viewSelector) }}

            {% endif %}

        {% endblock %}

        {% block main %}

            {% if hasFigures %}

                {% fragment_link_rewrite figuresPath %}

                {% for part in body %}

                    {{ render_pattern(part) }}

                {% endfor %}

                {% end_fragment_link_rewrite %}

            {% else %}

                {% for part in body %}

                    {{ render_pattern(part) }}

                {% endfor %}

            {% endif %}

        {% endblock %}

        {% block secondary %}

            {% if relatedItem %}

                <div class="grid-secondary-column__item grid-secondary-column__item--wide-only">

                    {{ render_pattern(relatedItem) }}

                </div>

            {% endif %}

        {% endblock %}

    {% endembed %}

    {% if listing %}

        {% embed 'grid/content.html.twig' with { 'isSubsequent': true } %}

            {% block main %}

                {{ render_pattern(listing) }}

            {% endblock %}

        {% endembed %}

    {% endif %}

{% endblock %}
